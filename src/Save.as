string GenerateCSharpClass() {
    string classContent = GenerateMetadata();
    classContent += "class " + g_className + ": Alteration {\n";
    classContent += "    public override void run(Map map){\n";

    for (uint i = 0; i < g_blockInputsArray.Length; i++) {
        classContent += GenerateMethodContent(g_methodTypes[i], g_blockInputsArray[i], g_blockOutputs[i], g_blockTypes[i]);
    }

    classContent += "        map.placeStagedBlocks();\n";
    classContent += "    }\n";
    classContent += "}\n";

    return classContent;
}

string GenerateMethodContent(MethodType methodType, array<string> inputs, string output, string type = "Block") {
    switch (methodType) {
        case MethodType::REPLACE:
            return GenerateReplace(inputs, output, type);
        case MethodType::DELETE:
            return GenerateDelete(inputs);
        case MethodType::PLACE:
            return GeneratePlace(inputs[0], output, type);
        case MethodType::PLACERELATIVE:
            return GeneratePlaceRelative(inputs, output, type);
        default:
            return "";
    }
}

string GenerateMetadata() {
    return "// Auto-generated by Alteration Helper\n"
           "// Version: " + g_version + "\n"
           "// Author: " + g_currUserName + "\n"
           "// Creation Date: " + g_creationDate + "\n"
           "// Description: " + g_description + "\n\n";
}

string GeneratePlace(string block, string newBlock, string type) {
    return "        map.place(\"" + block + "\", \"" + newBlock + "\", BlockType." + type + ");\n";
}

string GeneratePlaceRelative(array<string> blocks, string newBlock, string type) { 
    string output = "";
    for (uint i = 0; i < blocks.Length; i++) {
        output += "        map.placeRelative(\"" + blocks[i] + "\", \"" + newBlock + "\", BlockType." + type + ");\n";
    }
    return output;
}

string GenerateReplace(array<string> blocks, string newBlock, string type) {
    string output = "";
    for (uint i = 0; i < blocks.Length; i++) {
        output += "        map.replace(\"" + blocks[i] + "\", \"" + newBlock + "\", BlockType." + type + ");\n";
    }
    return output;
}

string GenerateDelete(const array<string> &blocks) {
    string output = "";
    for (uint i = 0; i < blocks.Length; i++) {
        output += "        map.delete(\"" + blocks[i] + "\");\n";
    }
    return output;
}
